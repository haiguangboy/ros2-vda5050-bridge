# 录测试结果

python3 test_complex_planner_workflow.py 
🧪 ComplexTrajectoryPlanner 完整工作流程测试
================================================================================
测试说明：
  1. 等待 /Odom 获取当前位置（起点）
  2. 等待 /nav_goal 获取目标点
  3. 自动计算转弯角度和前进距离
  4. 规划并发布前向轨迹（两次转弯 + 前进）
  5. 等待完成后规划并发布后向轨迹（倒车1米）
================================================================================
倒车距离: 1.0m
================================================================================

/home/yhg/Documents/ep-embodied/mqtt_bridge/tests/planner/test_complex_planner_workflow.py:74: DeprecationWarning: Callback API version 1 is deprecated, update to latest version
  self.mqtt_client = mqtt.Client()
✅ ComplexPlannerTester 节点已启动
   规划器: ComplexTrajectoryPlanner
   Service: /trajectory_status

🚀 连接到MQTT代理: localhost:1883
✅ MQTT连接成功
📡 订阅轨迹状态主题: EP/robot-001/cerebellum/embrain/trajectory_status

⏳ 等待 /Odom 话题数据（最多等待 10 秒）...
✅ 已接收到 /Odom 话题数据
   当前位置: (3.000, 0.000), 朝向: -1.571 (-90.0°)

✅ 成功获取 /Odom 话题数据

⏳ 等待目标点 /nav_goal 话题数据...
   无超时限制（按Ctrl+C可中断）

✅ 已接收到目标点 /nav_goal
   目标位置: (4.000, 1.000), 朝向: 1.571 (90.0°)

✅ 成功获取目标点数据


⏱️  准备发布前向轨迹...

================================================================================
📤 规划并发布前向轨迹（Traj1 + Traj2 组合）
================================================================================
📡 获取最新Odom数据...

📍 起点: (3.000, 0.000), yaw=-1.571 (-90.0°)
📍 终点: (4.000, 1.000), yaw=1.571 (90.0°)

📍 中间点（第1段终点，第2段起点）:
   位置: (4.000, 2.000)
   朝向: 1.571 (90.0°)

📐 自动计算参数:
   第一次转弯: 1.571 rad (90.0°)
   前进距离: 1.000 m
   第二次转弯: 1.571 rad (90.0°)

📍 第1段轨迹终点验证:
   规划终点: (4.000, 0.000), yaw=1.571 (90.0°)
   中间点: (4.000, 2.000), yaw=1.571 (90.0°)
   位置误差: 2.000 m
   朝向误差: 0.000 rad (0.0°)


📋 复杂前向轨迹规划:
   起点: (3.000, 0.000), yaw=-1.571 (-90.0°)
   第一次左转: 90.0°
   前进距离: 1.000m
   第二次左转: 90.0°
   阶段1: 原地左转 90.0°
   阶段2: 前进 1.000m (点间距0.15m, 7个点)
   阶段3: 原地左转 90.0°
   ✅ 前向轨迹规划完成: 共 10 个路径点
   终点: (4.000, 0.000), yaw=1.571 (90.0°)


✅ 前向轨迹生成完成，共 10 个路径点

所有路径点:
  点1: x=3.000, y=0.000, yaw=-1.571 (-90.0°)
  点2: x=3.000, y=0.000, yaw=0.000 (0.0°)
  点3: x=3.150, y=0.000, yaw=0.000 (0.0°)
  点4: x=3.300, y=0.000, yaw=0.000 (0.0°)
  点5: x=3.450, y=0.000, yaw=0.000 (0.0°)
  点6: x=3.600, y=0.000, yaw=0.000 (0.0°)
  点7: x=3.750, y=0.000, yaw=0.000 (0.0°)
  点8: x=3.900, y=0.000, yaw=0.000 (0.0°)
  点9: x=4.000, y=0.000, yaw=0.000 (0.0°)
  点10: x=4.000, y=0.000, yaw=1.571 (90.0°)

Beta-3参数: orientation=0.0, flag=0 (前向运动)
================================================================================
📤 轨迹已发布到 /plans
📋 轨迹ID: complex_forward_1759631725538

⏳ 等待MQTT轨迹完成信号（按Ctrl+C可中断）...


================================================================================
📊 收到MQTT轨迹状态消息
================================================================================
📋 轨迹ID: complex_forward_1759631725538
📍 状态: running
⏰ 时间戳: 1759631725541

🏃 轨迹执行中...
================================================================================


================================================================================
📊 收到MQTT轨迹状态消息
================================================================================
📋 轨迹ID: complex_forward_1759631725538
📍 状态: completed
⏰ 时间戳: 1759631726543

✅ 轨迹已完成！
================================================================================

✅ 前向轨迹已完成，等待3秒后发布后向轨迹...


================================================================================
📤 规划并发布后向轨迹（Traj3 倒车）
================================================================================
📡 获取最新Odom数据...

📋 后向轨迹规划 (倒车):
   起点: (3.000, 0.000), yaw=-1.571 (-90.0°)
   倒车距离: 1.000m
   生成路径点: 7个 (点间距0.15m)
   ✅ 后向轨迹规划完成: 共 7 个路径点
   终点: (3.000, 1.000), yaw=-1.571 (-90.0°)


✅ 后向轨迹生成完成，共 7 个路径点

所有路径点:
  点1: x=3.000, y=0.000, yaw=-1.571 (-90.0°)
  点2: x=3.000, y=0.150, yaw=-1.571 (-90.0°)
  点3: x=3.000, y=0.300, yaw=-1.571 (-90.0°)
  点4: x=3.000, y=0.450, yaw=-1.571 (-90.0°)
  点5: x=3.000, y=0.600, yaw=-1.571 (-90.0°)
  点6: x=3.000, y=0.750, yaw=-1.571 (-90.0°)
  点7: x=3.000, y=0.900, yaw=-1.571 (-90.0°)

Beta-3参数: orientation=3.14, flag=1 (倒车运动)
容器信息: type=AGV-T300, pos=(4.000, 1.000)
================================================================================
📤 轨迹已发布到 /plans
📋 轨迹ID: complex_backward_1759631729885

⏳ 等待MQTT轨迹完成信号（按Ctrl+C可中断）...


================================================================================
📊 收到MQTT轨迹状态消息
================================================================================
📋 轨迹ID: complex_backward_1759631729885
📍 状态: running
⏰ 时间戳: 1759631729886

🏃 轨迹执行中...
================================================================================


================================================================================
📊 收到MQTT轨迹状态消息
================================================================================
📋 轨迹ID: complex_backward_1759631729885
📍 状态: completed
⏰ 时间戳: 1759631730887

✅ 轨迹已完成！
================================================================================


✅ 所有轨迹发布完成
💡 保持运行以监听MQTT轨迹消息...
   按 Ctrl+C 停止测试

## service 查询结果
python3 query_trajectory_status.py 
⏳ 等待 /trajectory_status service...
✅ Service 已就绪

📞 调用 /trajectory_status service...

================================================================================
📊 轨迹状态查询结果
================================================================================
✅ 查询成功

状态信息:
  轨迹ID: complex_backward_1759631729885
  状态: completed
  时间戳: 1759631730887
  消息: 轨迹执行完成

✅ 轨迹已完成
================================================================================

发送目标：
 python3 mqtt_bridge/tests/planner/test_goto_service.py 
🧪 GoToPose Service 测试
================================================================================
模拟调度器使用GoToPose.srv格式发送目标点
================================================================================

⏳ 等待 /go_to_pose service...
✅ Service 已就绪

================================================================================
步骤1: 发送观察点
================================================================================
📤 发送目标点: (3.0, 0.5, 90°)
   模式: NORMAL
   超时: 60.0秒

================================================================================
📥 收到响应
================================================================================
arrived: True
message: 目标点1已接受，轨迹规划中
================================================================================

✅ 观察点已接受

💡 等待轨迹完成后，发送第2个目标点...

按Enter继续发送取货点...

================================================================================
步骤2: 发送取货点
================================================================================
📤 发送目标点: (4.0, 1.0, 90°)
   模式: NORMAL
   超时: 60.0秒

================================================================================
📥 收到响应
================================================================================
arrived: True
message: 目标点2已接受，轨迹规划中
================================================================================

✅ 取货点已接受

🎉 所有目标点已发送！
 yhg  ~  Documents  ep-embodied  


规划路径以及反馈：
 python3 unified_planner_workflow.py 
🚀 统一轨迹规划器
================================================================================
📋 使用说明：
  1. 本程序启动后等待目标点
  2. 【第1个点 - 观察点】使用 SimpleTrajectoryPlanner（前进 + 转弯）
  3. 【第2个点 - 取货点】使用 ComplexTrajectoryPlanner（转弯 + 前进 + 转弯 + 倒车）
================================================================================

⏳ 等待 /Odom 话题数据...

/home/yhg/Documents/ep-embodied/mqtt_bridge/tests/planner/unified_planner_workflow.py:68: DeprecationWarning: Callback API version 1 is deprecated, update to latest version
  self.mqtt_client = mqtt.Client()
✅ 统一轨迹规划器已启动
   规划器1: SimpleTrajectoryPlanner（观察点）
   规划器2: ComplexTrajectoryPlanner（取货点）
   Service: /trajectory_status（轨迹状态查询）
   Service: /go_to_pose（接收调度器目标点）

🚀 连接到MQTT代理: localhost:1883
✅ MQTT连接成功
📡 订阅轨迹状态主题: EP/robot-001/cerebellum/embrain/trajectory_status

⚠️  超时：未收到/Odom数据，使用默认起点位置

⚠️  使用默认起点位置: (0.000, 0.000), 朝向: 0.000 (0.0°)

================================================================================
📍 请按顺序发布目标点：

第1步 - 发布观察点：
  python3 publish_test_goal.py --x 3.0 --y 0.5-yaw-deg 90

第2步 - 等待第1段轨迹完成后，发布取货点：
  python3 publish_test_goal.py --x 4.0 --y 1.0 --yaw-deg 90
================================================================================

💡 等待目标点，按 Ctrl+C 停止


================================================================================
📞 收到GoToPose请求（调度器）
================================================================================
模式: NORMAL
目标: (3.000, 0.500), yaw=1.571 (90.0°)
超时: 60.0秒
✅ 接受为第1个目标点（观察点）
规划策略: SimpleTrajectoryPlanner

🔧 使用 SimpleTrajectoryPlanner 规划轨迹...
--------------------------------------------------------------------------------
📍 起点: (0.000, 0.000), yaw=0.000 (0.0°)
📍 终点: (3.000, 0.500), yaw=1.571 (90.0°)

📐 自动计算参数:
   前进距离: 3.041 m
   转弯角度: 1.571 rad (90.0°)


📋 路径规划开始:
   起点: (0.000, 0.000), yaw=0.000 (0.0°)
   终点: (3.000, 0.500), yaw=1.571 (90.0°)
   直线距离: 3.041m
   阶段1: 原地旋转 9.5° 朝向目标位置
   阶段2: 直线移动 3.041m (点间距0.15m, 21个点)
   阶段3: 原地旋转 80.5° 到目标朝向
   ✅ 规划完成: 共 24 个路径点

✅ 轨迹生成完成，共 24 个路径点

所有路径点:
  点1: x=0.000, y=0.000, yaw=0.000 (0.0°)
  点2: x=0.000, y=0.000, yaw=0.165 (9.5°)
  点3: x=0.143, y=0.024, yaw=0.165 (9.5°)
  点4: x=0.286, y=0.048, yaw=0.165 (9.5°)
  点5: x=0.429, y=0.071, yaw=0.165 (9.5°)
  点6: x=0.571, y=0.095, yaw=0.165 (9.5°)
  点7: x=0.714, y=0.119, yaw=0.165 (9.5°)
  点8: x=0.857, y=0.143, yaw=0.165 (9.5°)
  点9: x=1.000, y=0.167, yaw=0.165 (9.5°)
  点10: x=1.143, y=0.190, yaw=0.165 (9.5°)
  点11: x=1.286, y=0.214, yaw=0.165 (9.5°)
  点12: x=1.429, y=0.238, yaw=0.165 (9.5°)
  点13: x=1.571, y=0.262, yaw=0.165 (9.5°)
  点14: x=1.714, y=0.286, yaw=0.165 (9.5°)
  点15: x=1.857, y=0.310, yaw=0.165 (9.5°)
  点16: x=2.000, y=0.333, yaw=0.165 (9.5°)
  点17: x=2.143, y=0.357, yaw=0.165 (9.5°)
  点18: x=2.286, y=0.381, yaw=0.165 (9.5°)
  点19: x=2.429, y=0.405, yaw=0.165 (9.5°)
  点20: x=2.571, y=0.429, yaw=0.165 (9.5°)
  点21: x=2.714, y=0.452, yaw=0.165 (9.5°)
  点22: x=2.857, y=0.476, yaw=0.165 (9.5°)
  点23: x=3.000, y=0.500, yaw=0.165 (9.5°)
  点24: x=3.000, y=0.500, yaw=1.571 (90.0°)

Beta-3参数: orientation=0.0, flag=0
================================================================================
📤 第1段轨迹已发布（观察点）
📋 轨迹ID: observation_1759710599932
⏳ 等待MQTT完成信号...

📤 返回响应: 目标点1已接受，轨迹规划中
================================================================================

================================================================================
📊 收到MQTT轨迹完成信号
================================================================================
📋 轨迹ID: observation_1759710599932
📍 状态: completed
✅ 轨迹已完成！
================================================================================

📡 更新/Odom: (3.000, 0.500), yaw=1.571 (90.0°)
   (测试模式：轨迹终点 → /Odom)


================================================================================
📞 收到GoToPose请求（调度器）
================================================================================
模式: NORMAL
目标: (4.000, 1.000), yaw=1.571 (90.0°)
超时: 60.0秒
✅ 接受为第2个目标点（取货点）
规划策略: ComplexTrajectoryPlanner

🔧 使用 ComplexTrajectoryPlanner 规划轨迹...
--------------------------------------------------------------------------------
📍 起点: (3.000, 0.500), yaw=1.571 (90.0°)
📍 终点: (4.000, 1.000), yaw=1.571 (90.0°)

📍 中间点（倒车前位置）:
   位置: (4.000, 2.000)
   朝向: 1.571 (90.0°)

📐 前向轨迹参数:
   第一次转弯: -1.571 rad (-90.0°)
   前进距离: 1.000 m
   第二次转弯: 1.571 rad (90.0°)


📋 复杂前向轨迹规划:
   起点: (3.000, 0.500), yaw=1.571 (90.0°)
   第一次左转: -90.0°
   前进距离: 1.000m
   第二次左转: 90.0°
   阶段1: 原地左转 -90.0°
   阶段2: 前进 1.000m (点间距0.15m, 7个点)
   阶段3: 原地左转 90.0°
   ✅ 前向轨迹规划完成: 共 10 个路径点
   终点: (4.000, 0.500), yaw=1.571 (90.0°)

✅ 前向轨迹生成完成，共 10 个路径点

所有路径点:
  点1: x=3.000, y=0.500, yaw=1.571 (90.0°)
  点2: x=3.000, y=0.500, yaw=0.000 (0.0°)
  点3: x=3.150, y=0.500, yaw=0.000 (0.0°)
  点4: x=3.300, y=0.500, yaw=0.000 (0.0°)
  点5: x=3.450, y=0.500, yaw=0.000 (0.0°)
  点6: x=3.600, y=0.500, yaw=0.000 (0.0°)
  点7: x=3.750, y=0.500, yaw=0.000 (0.0°)
  点8: x=3.900, y=0.500, yaw=0.000 (0.0°)
  点9: x=4.000, y=0.500, yaw=0.000 (0.0°)
  点10: x=4.000, y=0.500, yaw=1.571 (90.0°)

Beta-3参数: orientation=0.0, flag=0
================================================================================
📤 第2段轨迹（前向）已发布
📋 轨迹ID: pickup_forward_1759710777903
⏳ 等待MQTT完成信号，然后发布倒车轨迹...

📤 返回响应: 目标点2已接受，轨迹规划中
================================================================================

================================================================================
📊 收到MQTT轨迹完成信号
================================================================================
📋 轨迹ID: pickup_forward_1759710777903
📍 状态: completed
✅ 轨迹已完成！
================================================================================

📡 更新/Odom: (4.000, 0.500), yaw=1.571 (90.0°)
   (测试模式：轨迹终点 → /Odom)

⏳ 等待3秒后发布倒车轨迹...


================================================================================
📤 规划并发布后向轨迹（倒车）
================================================================================

📋 后向轨迹规划 (倒车):
   起点: (4.000, 0.500), yaw=1.571 (90.0°)
   倒车距离: 1.000m
   生成路径点: 7个 (点间距0.15m)
   ✅ 后向轨迹规划完成: 共 7 个路径点
   终点: (4.000, -0.500), yaw=1.571 (90.0°)

✅ 后向轨迹生成完成，共 7 个路径点

所有路径点:
  点1: x=4.000, y=0.500, yaw=1.571 (90.0°)
  点2: x=4.000, y=0.350, yaw=1.571 (90.0°)
  点3: x=4.000, y=0.200, yaw=1.571 (90.0°)
  点4: x=4.000, y=0.050, yaw=1.571 (90.0°)
  点5: x=4.000, y=-0.100, yaw=1.571 (90.0°)
  点6: x=4.000, y=-0.250, yaw=1.571 (90.0°)
  点7: x=4.000, y=-0.400, yaw=1.571 (90.0°)

Beta-3参数: orientation=3.14, flag=1
容器信息: type=AGV-T300, pos=(5.0, 2.0)
================================================================================
📤 第2段轨迹（后向）已发布
📋 轨迹ID: pickup_backward_1759710781912
⏳ 等待MQTT完成信号...


================================================================================
📊 收到MQTT轨迹完成信号
================================================================================
📋 轨迹ID: pickup_backward_1759710781912
📍 状态: completed
✅ 轨迹已完成！
================================================================================

🎉 所有轨迹已完成！
✅ 观察点和取货点任务完成
💡 程序将继续监听，按Ctrl+C退出

## 完整的测试
### 发送目标点
 python3 mqtt_bridge/tests/planner/test_goto_service.py 
🧪 GoToPose Service 测试
================================================================================
模拟调度器使用GoToPose.srv格式发送目标点
================================================================================

⏳ 等待 /go_to_pose service...
✅ Service 已就绪

================================================================================
步骤1: 发送观察点
================================================================================
📤 发送目标点: (3.0, 0.5, 90°)
   模式: NORMAL
   超时: 60.0秒

================================================================================
📥 收到响应
================================================================================
arrived: True
message: 目标点1已接受，轨迹规划中
================================================================================

✅ 观察点已接受

💡 等待轨迹完成后，发送第2个目标点...

按Enter继续发送取货点...

================================================================================
步骤2: 发送取货点
================================================================================
📤 发送目标点: (4.5, 1.3, -95°)
   模式: NORMAL
   超时: 60.0秒

================================================================================
📥 收到响应
================================================================================
arrived: True
message: 目标点2已接受，轨迹规划中
================================================================================

✅ 取货点已接受

🎉 所有目标点已发送！

### 规划器给出路径
python3 unified_planner_workflow.py 
🚀 统一轨迹规划器
================================================================================
📋 使用说明：
  1. 本程序启动后等待目标点
  2. 【第1个点 - 观察点】使用 SimpleTrajectoryPlanner（前进 + 转弯）
  3. 【第2个点 - 取货点】使用 ComplexTrajectoryPlanner（转弯 + 前进 + 转弯 + 倒车）
================================================================================

⏳ 等待 /Odom 话题数据...

/home/yhg/Documents/ep-embodied/mqtt_bridge/tests/planner/unified_planner_workflow.py:68: DeprecationWarning: Callback API version 1 is deprecated, update to latest version
  self.mqtt_client = mqtt.Client()
✅ 统一轨迹规划器已启动
   规划器1: SimpleTrajectoryPlanner（观察点）
   规划器2: ComplexTrajectoryPlanner（取货点）
   Service: /trajectory_status（轨迹状态查询）
   Service: /go_to_pose（接收调度器目标点）

🚀 连接到MQTT代理: localhost:1883
✅ MQTT连接成功
📡 订阅轨迹状态主题: EP/robot-001/cerebellum/embrain/trajectory_status

⚠️  超时：未收到/Odom数据，使用默认起点位置

⚠️  使用默认起点位置: (0.000, 0.000), 朝向: 0.000 (0.0°)

================================================================================
📍 请按顺序发布目标点：

第1步 - 发布观察点：
  python3 publish_test_goal.py --x 3.0 --y 0.0 --yaw-deg 90

第2步 - 等待第1段轨迹完成后，发布取货点：
  python3 publish_test_goal.py --x 4.0 --y 1.0 --yaw-deg-90
================================================================================

💡 等待目标点，按 Ctrl+C 停止


================================================================================
📞 收到GoToPose请求（调度器）
================================================================================
模式: NORMAL
目标: (3.000, 0.500), yaw=1.571 (90.0°)
超时: 60.0秒
✅ 接受为第1个目标点（观察点）
规划策略: SimpleTrajectoryPlanner

🔧 使用 SimpleTrajectoryPlanner 规划轨迹...
--------------------------------------------------------------------------------
📍 起点: (0.000, 0.000), yaw=0.000 (0.0°)
📍 终点: (3.000, 0.500), yaw=1.571 (90.0°)

📐 自动计算参数:
   前进距离: 3.041 m
   转弯角度: 1.571 rad (90.0°)


📋 路径规划开始:
   起点: (0.000, 0.000), yaw=0.000 (0.0°)
   终点: (3.000, 0.500), yaw=1.571 (90.0°)
   直线距离: 3.041m
   阶段1: 原地旋转 9.5° 朝向目标位置
   阶段2: 直线移动 3.041m (点间距0.15m, 21个点)
   阶段3: 原地旋转 80.5° 到目标朝向
   ✅ 规划完成: 共 24 个路径点

✅ 轨迹生成完成，共 24 个路径点

所有路径点:
  点1: x=0.000, y=0.000, yaw=0.000 (0.0°)
  点2: x=0.000, y=0.000, yaw=0.165 (9.5°)
  点3: x=0.143, y=0.024, yaw=0.165 (9.5°)
  点4: x=0.286, y=0.048, yaw=0.165 (9.5°)
  点5: x=0.429, y=0.071, yaw=0.165 (9.5°)
  点6: x=0.571, y=0.095, yaw=0.165 (9.5°)
  点7: x=0.714, y=0.119, yaw=0.165 (9.5°)
  点8: x=0.857, y=0.143, yaw=0.165 (9.5°)
  点9: x=1.000, y=0.167, yaw=0.165 (9.5°)
  点10: x=1.143, y=0.190, yaw=0.165 (9.5°)
  点11: x=1.286, y=0.214, yaw=0.165 (9.5°)
  点12: x=1.429, y=0.238, yaw=0.165 (9.5°)
  点13: x=1.571, y=0.262, yaw=0.165 (9.5°)
  点14: x=1.714, y=0.286, yaw=0.165 (9.5°)
  点15: x=1.857, y=0.310, yaw=0.165 (9.5°)
  点16: x=2.000, y=0.333, yaw=0.165 (9.5°)
  点17: x=2.143, y=0.357, yaw=0.165 (9.5°)
  点18: x=2.286, y=0.381, yaw=0.165 (9.5°)
  点19: x=2.429, y=0.405, yaw=0.165 (9.5°)
  点20: x=2.571, y=0.429, yaw=0.165 (9.5°)
  点21: x=2.714, y=0.452, yaw=0.165 (9.5°)
  点22: x=2.857, y=0.476, yaw=0.165 (9.5°)
  点23: x=3.000, y=0.500, yaw=0.165 (9.5°)
  点24: x=3.000, y=0.500, yaw=1.571 (90.0°)

Beta-3参数: orientation=0.0, flag=0
================================================================================
📤 第1段轨迹已发布（观察点）
📋 轨迹ID: observation_1759712201868
⏳ 等待MQTT完成信号...

📤 返回响应: 目标点1已接受，轨迹规划中
================================================================================

================================================================================
📊 收到MQTT轨迹完成信号
================================================================================
📋 轨迹ID: observation_1759712201868
📍 状态: completed
✅ 轨迹已完成！
================================================================================

📡 更新/Odom: (3.000, 0.500), yaw=1.571 (90.0°)
   (测试模式：轨迹终点 → /Odom)


================================================================================
📞 收到GoToPose请求（调度器）
================================================================================
模式: NORMAL
目标: (4.500, 1.300), yaw=-1.658 (-95.0°)
超时: 60.0秒
✅ 接受为第2个目标点（取货点）
规划策略: ComplexTrajectoryPlanner

🔧 使用 ComplexTrajectoryPlanner 规划轨迹...
--------------------------------------------------------------------------------
📍 起点: (3.000, 0.500), yaw=1.571 (90.0°)
📍 终点: (4.500, 1.300), yaw=-1.658 (-95.0°)

📐 自动计算轨迹分解:
   X方向距离: 1.500 m
   Y方向距离（倒车）: 0.800 m
   总角度变化: -3.229 rad (-185.0°)

📐 前向轨迹参数:
   第一次转弯: -1.571 rad (-90.0°)
   前进距离: 1.500 m
   第二次转弯: -1.658 rad (-95.0°)
   前向终点预期: (4.500, 0.500), yaw=-1.658


📋 复杂前向轨迹规划:
   起点: (3.000, 0.500), yaw=1.571 (90.0°)
   第一次左转: -90.0°
   前进距离: 1.500m
   第二次左转: -95.0°
   阶段1: 原地左转 -90.0°
   阶段2: 前进 1.500m (点间距0.15m, 11个点)
   阶段3: 原地左转 -95.0°
   ✅ 前向轨迹规划完成: 共 14 个路径点
   终点: (4.500, 0.500), yaw=-1.658 (-95.0°)

✅ 前向轨迹生成完成，共 14 个路径点

所有路径点:
  点1: x=3.000, y=0.500, yaw=1.571 (90.0°)
  点2: x=3.000, y=0.500, yaw=0.000 (0.0°)
  点3: x=3.150, y=0.500, yaw=0.000 (0.0°)
  点4: x=3.300, y=0.500, yaw=0.000 (0.0°)
  点5: x=3.450, y=0.500, yaw=0.000 (0.0°)
  点6: x=3.600, y=0.500, yaw=0.000 (0.0°)
  点7: x=3.750, y=0.500, yaw=0.000 (0.0°)
  点8: x=3.900, y=0.500, yaw=0.000 (0.0°)
  点9: x=4.050, y=0.500, yaw=0.000 (0.0°)
  点10: x=4.200, y=0.500, yaw=0.000 (0.0°)
  点11: x=4.350, y=0.500, yaw=0.000 (0.0°)
  点12: x=4.500, y=0.500, yaw=0.000 (0.0°)
  点13: x=4.500, y=0.500, yaw=0.000 (0.0°)
  点14: x=4.500, y=0.500, yaw=-1.658 (-95.0°)

Beta-3参数: orientation=0.0, flag=0
================================================================================
📤 第2段轨迹（前向）已发布
📋 轨迹ID: pickup_forward_1759712209473
⏳ 等待MQTT完成信号，然后发布倒车轨迹...

📤 返回响应: 目标点2已接受，轨迹规划中
================================================================================

================================================================================
📊 收到MQTT轨迹完成信号
================================================================================
📋 轨迹ID: pickup_forward_1759712209473
📍 状态: completed
✅ 轨迹已完成！
================================================================================

📡 更新/Odom: (4.500, 0.500), yaw=-1.658 (-95.0°)
   (测试模式：轨迹终点 → /Odom)

⏳ 等待3秒后发布倒车轨迹...


================================================================================
📤 规划并发布后向轨迹（倒车）
================================================================================
📐 倒车参数:
   倒车距离: 0.800 m
   倒车终点: (4.500, 1.300)


📋 后向轨迹规划 (倒车):
   起点: (4.500, 0.500), yaw=-1.658 (-95.0°)
   倒车距离: 0.800m
   生成路径点: 6个 (点间距0.15m)
   ✅ 后向轨迹规划完成: 共 6 个路径点
   终点: (4.570, 1.297), yaw=-1.658 (-95.0°)

✅ 后向轨迹生成完成，共 6 个路径点

所有路径点:
  点1: x=4.500, y=0.500, yaw=-1.658 (-95.0°)
  点2: x=4.513, y=0.649, yaw=-1.658 (-95.0°)
  点3: x=4.526, y=0.799, yaw=-1.658 (-95.0°)
  点4: x=4.539, y=0.948, yaw=-1.658 (-95.0°)
  点5: x=4.552, y=1.098, yaw=-1.658 (-95.0°)
  点6: x=4.565, y=1.247, yaw=-1.658 (-95.0°)

Beta-3参数: orientation=3.14, flag=1
容器信息: type=AGV-T300, pos=(4.5, 1.3)
================================================================================
📤 第2段轨迹（后向）已发布
📋 轨迹ID: pickup_backward_1759712213483
⏳ 等待MQTT完成信号...


================================================================================
📊 收到MQTT轨迹完成信号
================================================================================
📋 轨迹ID: pickup_backward_1759712213483
📍 状态: completed
✅ 轨迹已完成！
================================================================================

🎉 所有轨迹已完成！
✅ 观察点和取货点任务完成
💡 程序将继续监听，按Ctrl+C退出

